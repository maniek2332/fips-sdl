if(${CMAKE_SOURCE_DIR} STREQUAL ${CMAKE_BINARY_DIR})
  message(FATAL_ERROR "Prevented in-tree built. Please create a build directory outside of the SDL source code and call cmake from there")
endif()

cmake_minimum_required(VERSION 2.8.5)
fips_begin_sharedlib(SDL2)

fips_files(SDL/src/atomic/SDL_atomic.c)
fips_files(SDL/src/atomic/SDL_spinlock.c)
fips_files_ex(SDL/src/ *.c NO_RECURSE)
fips_files_ex(SDL/src/audio/ *.c NO_RECURSE)
if(FIPS_ANDROID)
  fips_files_ex(SDL/src/audio/android/ *.c NO_RECURSE)
endif()
fips_files_ex(SDL/src/audio/dummy/ *.c NO_RECURSE)
if(FIPS_ANDROID)
  fips_files_ex(SDL/src/core/android/ *.c NO_RECURSE)
endif()
fips_files_ex(SDL/src/cpuinfo/ *.c NO_RECURSE)
fips_files_ex(SDL/src/dynapi/ *.c NO_RECURSE)
fips_files_ex(SDL/src/events/ *.c NO_RECURSE)
fips_files_ex(SDL/src/file/ *.c NO_RECURSE)
fips_files_ex(SDL/src/haptic/ *.c NO_RECURSE)
fips_files_ex(SDL/src/haptic/dummy/ *.c NO_RECURSE)
fips_files_ex(SDL/src/joystick/ *.c NO_RECURSE)
if(FIPS_ANDROID)
  fips_files_ex(SDL/src/joystick/android/ *.c NO_RECURSE)
endif()
fips_files_ex(SDL/src/loadso/dlopen/ *.c NO_RECURSE)
fips_files_ex(SDL/src/power/ *.c NO_RECURSE)
if(FIPS_ANDROID)
  fips_files_ex(SDL/src/power/android/ *.c NO_RECURSE)
  fips_files_ex(SDL/src/filesystem/android/ *.c NO_RECURSE)
endif()
fips_files_ex(SDL/src/render/ *.c NO_RECURSE)
fips_files_ex(SDL/src/render/direct3d/ *.c NO_RECURSE)
fips_files_ex(SDL/src/render/direct3d11/ *.c NO_RECURSE)
fips_files_ex(SDL/src/render/opengl/ *.c NO_RECURSE)
fips_files_ex(SDL/src/render/opengles/ *.c NO_RECURSE)
fips_files_ex(SDL/src/render/opengles2/ *.c NO_RECURSE)
fips_files_ex(SDL/src/render/psp/ *.c NO_RECURSE)
fips_files_ex(SDL/src/render/software/ *.c NO_RECURSE)
fips_files_ex(SDL/src/stdlib/ *.c NO_RECURSE)
fips_files_ex(SDL/src/thread/ *.c NO_RECURSE)
fips_files_ex(SDL/src/thread/pthread/ *.c NO_RECURSE)
fips_files_ex(SDL/src/timer/ *.c NO_RECURSE)
fips_files_ex(SDL/src/timer/unix/ *.c NO_RECURSE)
fips_files_ex(SDL/src/video/ *.c NO_RECURSE)
if(FIPS_ANDROID)
  fips_files_ex(SDL/src/video/android/ *.c NO_RECURSE)
endif()
fips_files_ex(SDL/src/test/ *.c NO_RECURSE)

if(FIPS_ANDROID)
  add_definitions(-DGL_GLEXT_PROTOTYPES)
  add_definitions(-DGL_GLEXT_PROTOTYPES)
  fips_libs(dl GLESv1_CM GLESv2 log android)
endif()
fips_include_directories(SDL/include)
fips_include_directories(SDL/src)

fips_end_sharedlib()
